{
  "observer": {
    "hostname": "f4b5ffba4926",
    "type": "apm-server",
    "version": "6.6.0",
    "version_major": 7
  },
  "agent": {
    "name": "nodejs",
    "version": "1.14.5"
  },
  "trace": {
    "id": "c09138b645d94ca3a960ba4a4fd1ba0a"
  },
  "@timestamp": "2019-02-13T02:01:14.180Z",
  "ecs": {
    "version": "1.1.0-dev"
  },
  "service": {
    "name": "opbeans-node"
  },
  "processor": {
    "name": "transaction",
    "event": "span"
  },
  "transaction": {
    "id": "c09138b6-45d9-4ca3-a960-ba4a4fd1ba0a"
  },
  "span": {
    "duration": {
      "us": 8748
    },
    "stacktrace": [
      {
        "library_frame": true,
        "exclude_from_grouping": false,
        "filename": "node_modules/pg-pool/index.js",
        "abs_path": "/app/node_modules/pg-pool/index.js",
        "line": {
          "number": 158
        },
        "function": "global.<anonymous>"
      },
      {
        "library_frame": true,
        "exclude_from_grouping": false,
        "filename": "node_modules/pg-pool/index.js",
        "abs_path": "/app/node_modules/pg-pool/index.js",
        "line": {
          "number": 137
        },
        "function": "BoundPool.<anonymous>"
      },
      {
        "exclude_from_grouping": false,
        "library_frame": true,
        "filename": "node_modules/generic-pool/lib/generic-pool.js",
        "abs_path": "/app/node_modules/generic-pool/lib/generic-pool.js",
        "line": {
          "number": 310
        },
        "function": "dispense"
      },
      {
        "exclude_from_grouping": false,
        "library_frame": true,
        "filename": "node_modules/generic-pool/lib/generic-pool.js",
        "abs_path": "/app/node_modules/generic-pool/lib/generic-pool.js",
        "line": {
          "number": 391
        },
        "function": "acquire"
      },
      {
        "library_frame": true,
        "exclude_from_grouping": false,
        "filename": "node_modules/pg-pool/index.js",
        "abs_path": "/app/node_modules/pg-pool/index.js",
        "line": {
          "number": 111
        },
        "function": "BoundPool.<anonymous>"
      },
      {
        "library_frame": true,
        "exclude_from_grouping": false,
        "filename": "node_modules/pg-pool/index.js",
        "abs_path": "/app/node_modules/pg-pool/index.js",
        "line": {
          "number": 75
        },
        "function": "Pool._promiseNoCallback"
      },
      {
        "library_frame": true,
        "exclude_from_grouping": false,
        "filename": "node_modules/pg-pool/index.js",
        "abs_path": "/app/node_modules/pg-pool/index.js",
        "line": {
          "number": 109
        },
        "function": "Pool.connect"
      },
      {
        "exclude_from_grouping": false,
        "library_frame": true,
        "filename": "node_modules/pg-pool/index.js",
        "abs_path": "/app/node_modules/pg-pool/index.js",
        "line": {
          "number": 154
        },
        "function": "BoundPool.<anonymous>"
      },
      {
        "library_frame": true,
        "exclude_from_grouping": false,
        "filename": "node_modules/pg-pool/index.js",
        "abs_path": "/app/node_modules/pg-pool/index.js",
        "line": {
          "number": 70
        },
        "function": "Pool._promise"
      },
      {
        "library_frame": true,
        "exclude_from_grouping": false,
        "filename": "node_modules/pg-pool/index.js",
        "abs_path": "/app/node_modules/pg-pool/index.js",
        "line": {
          "number": 153
        },
        "function": "Pool.query"
      },
      {
        "library_frame": false,
        "exclude_from_grouping": false,
        "filename": "server/routes.js",
        "abs_path": "/app/server/routes.js",
        "line": {
          "number": 94,
          "context": "      db.pool.query(sql, [row.product_id], next())"
        },
        "function": "<anonymous>",
        "context": {
          "pre": [
            "    result.rows.forEach(function (row) {",
            "      var sql = 'SELECT id, sku, name, stock FROM products WHERE id=$1'"
          ],
          "post": [
            "    })",
            "  })"
          ]
        }
      },
      {
        "library_frame": true,
        "exclude_from_grouping": false,
        "filename": "",
        "line": {
          "number": 0
        },
        "function": "forEach"
      },
      {
        "library_frame": false,
        "exclude_from_grouping": false,
        "filename": "server/routes.js",
        "abs_path": "/app/server/routes.js",
        "line": {
          "number": 92,
          "context": "    result.rows.forEach(function (row) {"
        },
        "function": "<anonymous>",
        "context": {
          "pre": [
            "    })",
            ""
          ],
          "post": [
            "      var sql = 'SELECT id, sku, name, stock FROM products WHERE id=$1'",
            "      db.pool.query(sql, [row.product_id], next())"
          ]
        }
      },
      {
        "exclude_from_grouping": false,
        "library_frame": true,
        "filename": "node_modules/pg-pool/index.js",
        "abs_path": "/app/node_modules/pg-pool/index.js",
        "line": {
          "number": 60
        },
        "function": "global.<anonymous>"
      },
      {
        "library_frame": true,
        "exclude_from_grouping": false,
        "filename": "/usr/local/lib/node_modules/pm2/node_modules/event-loop-inspector/index.js",
        "abs_path": "/usr/local/lib/node_modules/pm2/node_modules/event-loop-inspector/index.js",
        "line": {
          "number": 138
        },
        "function": "args.(anonymous function)"
      },
      {
        "library_frame": true,
        "exclude_from_grouping": false,
        "filename": "internal/process/next_tick.js",
        "abs_path": "internal/process/next_tick.js",
        "line": {
          "number": 132
        },
        "function": "_combinedTickCallback"
      },
      {
        "library_frame": true,
        "exclude_from_grouping": false,
        "filename": "internal/process/next_tick.js",
        "abs_path": "internal/process/next_tick.js",
        "line": {
          "number": 181
        },
        "function": "_tickCallback"
      }
    ],
    "name": "SELECT FROM products",
    "start": {
      "us": 5107
    },
    "type": "db.postgresql.query",
    "db": {
      "statement": "SELECT id, sku, name, stock FROM products WHERE id=$1",
      "type": "sql"
    }
  },
  "timestamp": {
    "us": 1550023274180000
  }
}